\documentclass{article}
\usepackage{amsmath,amssymb,mathrsfs,amsthm}
%\usepackage{tikz-cd}
%\usepackage{hyperref}
\newcommand{\inner}[2]{\left\langle #1, #2 \right\rangle}
\newcommand{\tr}{\ensuremath\mathrm{tr}\,} 
\newcommand{\Span}{\ensuremath\mathrm{span}} 
\def\Re{\ensuremath{\mathrm{Re}}\,}
\def\Im{\ensuremath{\mathrm{Im}}\,}
\newcommand{\id}{\ensuremath\mathrm{id}} 
\newcommand{\diam}{\ensuremath\mathrm{diam}} 
\newcommand{\lcm}{\ensuremath\mathrm{lcm}} 
\newcommand{\supp}{\ensuremath\mathrm{supp}\,}
\newcommand{\dom}{\ensuremath\mathrm{dom}\,}
\newcommand{\upto}{\nearrow}
\newcommand{\downto}{\searrow}
\newcommand{\norm}[1]{\left\Vert #1 \right\Vert}
\theoremstyle{definition}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\begin{document}
\title{$L^0$, convergence in measure,  equi-integrability, the Vitali convergence theorem, and the de la Vall\'ee-Poussin criterion}
\author{Jordan Bell}
\date{June 10, 2015}

\maketitle

\section{Measurable spaces}
Let $\overline{\mathbb{R}}=\mathbb{R} \cup \{-\infty,\infty\}$, with the order topology.
We assign $\mathbb{R}$ the Borel $\sigma$-algebra. 
It is a fact that for $E \subset \overline{\mathbb{R}}$,
 $E \in \mathscr{B}_{\overline{\mathbb{R}}}$
if and only if  $E \setminus \{-\infty,\infty\} \in \mathscr{B}_{\mathbb{R}}$.


\begin{theorem}
Let $(\Omega,\Sigma)$ be a measurable space. 
If $f_j$ is a sequence of measurable functions $\Omega \to \overline{\mathbb{R}}$, then for each $k$,
\[
g_k(x)= \sup_{j \geq k} f_j(x), \qquad h_k(x)=  \inf_{j \geq k} f_j(x),
\]
are measurable $\Omega \to \overline{\mathbb{R}}$, and
\[
g(x) = \limsup_{j \to \infty} f_j(x), \qquad h(x) = \liminf_{j \to \infty} f_j(x),
\]
are measurable $\Omega \to \overline{\mathbb{R}}$.
\label{supmeasurable}
\end{theorem}
\begin{proof}
Let $a \in \mathbb{R}$. For each $j$, $f_j^{-1}(a,\infty] \in \Sigma$, so
\[
\bigcup_{j=k}^\infty f_j^{-1}(a,\infty] \in \Sigma.
\]
For each $j \geq k$,
\[
f_j^{-1}(a,\infty] \subset \left\{ x \in \Omega: \sup_{i \geq k} f_i(x) > a \right\},
\]
so
\[
\bigcup_{j=k}^\infty f_j^{-1}(a,\infty] \subset \left\{ x \in \Omega: \sup_{i \geq k} f_i(x) > a \right\}.
\]
If $y \not \in \bigcup_{j=k}^\infty f_j^{-1}(a,\infty]$, then for each $j \geq k$, $f_j(y) \leq a$, hence
$g_k(y) \leq a$, which means that
$y \not \in \left\{ x \in \Omega: g_k(x) > a \right\}$. Therefore,
\[
\bigcup_{j=k}^\infty f_j^{-1}(a,\infty]
=\left\{ x \in \Omega: g_k(x) > a \right\},
\]
and thus
$g_k^{-1}(a,\infty] \in \Sigma$. Because this is true for all $a \in \mathbb{R}$ and
$\mathscr{B}_{\overline{\mathbb{R}}}$ is generated by the collection 
$\{(a,\infty]: a \in \mathbb{R}\}$, it follows that $g_k:\Omega \to \overline{\mathbb{R}}$ is measurable. 

That $h_k$ is measurable follows from the fact that if $f:\Omega \to \overline{\mathbb{R}}$ is measurable
then $-f:\Omega \to \overline{\mathbb{R}}$ is measurable, and that
$h_k(x)=\inf_{j \geq k} f_j(x) = -\sup_{j \geq k} (-f_j(x))$. 

For $x \in \Omega$,
\[
g(x) = \inf_{k \geq 1} g_k(x),
\]
and because each $g_k$ is measurable it follows that $g$ is measurable. Likewise,
\[
h(x) = \sup_{k \geq 1} h_k(x),
\]
and because each $h_k$ is measurable it follows that $h$ is measurable.
\end{proof}



\section{Convergence in measure}
Let $(\Omega,\Sigma,\mu)$ be a probability space.
Let $L^0(\mu)$ be the collection of equivalence classes of
measurable functions 
$\Omega \to \mathbb{C}$, where $\mathbb{C}$ has the Borel $\sigma$-algebra, and where two functions $f$ and $g$ are equivalent when
\[
\mu\{x \in \Omega: f(x) \neq g(x)\} = 0.
\]
$L^0(\mu)$ is a vector space. 
For $f,g \in L^0(\mu)$ we define
\[
\rho(f,g) = \int_\Omega \frac{|f-g|}{1+|f-g|}  d\mu.
\]
This is a metric on $L^0(\mu)$, and one proves that with this metric $L^0(\mu)$ is a topological vector space. We call the topology
induced by $\rho$ the \textbf{topology of convergence in measure}.\footnote{Charalambos D. 
Aliprantis and Kim C. Border, {\em Infinite Dimensional Analysis: A Hitchhiker's Guide}, third ed., p.~480,
Lemma 13.40.} 


\begin{theorem}
Suppose that  $f_n$ is  a sequence in $L^0(\mu)$.  $f_n \to 0$ in the topology of convergence
in measure if and only if for each $\epsilon>0$,
\[
\lim_{n \to \infty} \mu\left( \{x \in \Omega: |f_n(x)| \geq \epsilon \} \right) = 0.
\]
\end{theorem}
\begin{proof}
Suppose that $f_n \to 0$ in the topology of convergence in measure and let
$\epsilon>0$. For each $n$,
let
\[
A_n = \{x \in \Omega: |f_n(x)| \geq \epsilon\}=
\left\{ x \in \Omega: \frac{|f_n(x)|}{1+|f_n(x)|} \geq \frac{\epsilon}{1+\epsilon}\right\}.
\]
Because $\frac{\epsilon}{1+\epsilon} \chi_{A_n} \leq 
\frac{|f_n|}{1+|f_n|}$, 
\[
\int_\Omega \frac{\epsilon}{1+\epsilon} \chi_{A_n} d\mu
\leq \int_\Omega \frac{|f_n|}{1+|f_n|} d\mu
=\rho(f_n,0),
\]
i.e. $\mu(A_n) \leq \frac{1+\epsilon}{\epsilon} \rho(f_n,0)$, which tends to
$0$ as $n \to \infty$. 

Let $\epsilon>0$ and for each $n$, let
\[
A_n = \{x \in \Omega: |f_n(x)| \geq \epsilon\}=
\left\{ x \in \Omega: \frac{|f_n(x)|}{1+|f_n(x)|} \geq \frac{\epsilon}{1+\epsilon}\right\}.
\]
Suppose that $\mu(A_n) \to 0$ as $n \to \infty$. There is some $n_\epsilon$ such
that $n \geq n_\epsilon$ implies that $\mu(A_n)<\epsilon$. For $n \geq n_\epsilon$,
\begin{align*}
\rho(f_n,0)&=\int_{A_n} \frac{|f_n|}{1+|f_n|} d\mu
+\int_{\Omega \setminus A_n} \frac{|f_n|}{1+|f_n|} d\mu\\
&\leq \int_{A_n} 1 \; d\mu + \int_{\Omega \setminus A_n} \frac{\epsilon}{1+\epsilon} d\mu\\
&=\frac{1+\epsilon}{1+\epsilon} \mu(A_n)+\frac{\epsilon}{1+\epsilon} \mu(\Omega \setminus A_n)\\
&=\frac{1}{1+\epsilon} \mu(A_n) + \frac{\epsilon}{1+\epsilon} (\mu(A_n)+\mu(\Omega \setminus A_n))\\
&=\frac{1}{1+\epsilon} \mu(A_n)+\frac{\epsilon}{1+\epsilon}\\
&<\frac{1}{1+\epsilon}\cdot \epsilon+\frac{\epsilon}{1+\epsilon}\\
&<2\epsilon.
\end{align*}
This shows that $f_n \to 0$ in the topology of convergence in measure.
\end{proof}


We now prove that if a sequence in
$L^0(\mu)$ converges almost everywhere to $0$ then
it converges in measure to $0$.\footnote{Charalambos D. 
Aliprantis and Kim C. Border, {\em Infinite Dimensional Analysis: A Hitchhiker's Guide}, third ed., p.~479,
Theorem 13.37.} 

\begin{theorem}
Suppose that $f_n$ is a sequence in $L^0(\mu)$ and that for  almost all $x \in \Omega$,
$f_n(x) \to 0$ as $n \to \infty$. Then $f_n \to 0$ in the topology of convergence in measure.
\end{theorem}
\begin{proof}
Let $\epsilon>0$ and let $\eta>0$. Egorov's theorem tells us that there is some $E \in \Sigma$ with
$\mu(E)<\eta$  such that
$f_n \to 0$ uniformly on $\Omega \setminus E$.
So there is some $n_0$ such that if  
 $n \geq n_0$ and $x \in \Omega \setminus E$ then
$|f_n(x)|<\epsilon$. 
Thus for $n \geq n_0$,
\begin{align*}
\mu(\{x \in \Omega: |f_n(x)| \geq \epsilon\})&\leq \mu(E)+
\mu(\{x \in \Omega \setminus E: |f_n(x)| \geq \epsilon\})\\
&=\mu(E)\\
&<\eta.
\end{align*}
Then $\mu(\{x \in \Omega: |f_n(x)| \geq \epsilon\}) \to 0$ as $n \to \infty$, namely, 
$f_n \to 0$ in measure.
\end{proof}

\begin{theorem}
If $f_n$ is a sequence in $L^1(\mu)$  that converges in $L^1(\mu)$ to $0$, then
$f_n$ converges in measure to $0$.
\end{theorem}
\begin{proof}
Let $\epsilon>0$ and let $A_n=\{x \in \Omega: |f_n(x)| \geq \epsilon\}$.
By Chebyshev's inequality,
\[
\mu(A_n) \leq \frac{1}{\epsilon} \norm{f_n}_1,
\]
hence $\mu(A_n) \to 0$ as $n \to \infty$, namely, $f_n$ converges to $0$ in measure.
\end{proof}


The following theorem shows that a sequence in $L^0(\mu)$ that converges in measure to $0$
then it has a subsequence that almost everywhere converges to  $0$.\footnote{Charalambos D. 
Aliprantis and Kim C. Border, {\em Infinite Dimensional Analysis: A Hitchhiker's Guide}, third ed., p.~479,
Theorem 13.38.} 

\begin{theorem}
Suppose that $f_n$ is a sequence in $L^0(\mu)$ that converges in measure to $0$.
Then there is a subsequence $f_{a(n)}$ of $f_n$ such that for almost all
$x \in \Omega$, $f_{a(n)}(x) \to 0$.
\end{theorem}
\begin{proof}
For each $n$,
with $\epsilon=\frac{1}{n}$,
there is some $a(n)$ such that
$m \geq a(n)$ implies that
\[
\mu\left(\left\{x \in \Omega: |f_m(x)| \geq \frac{1}{n}\right\}\right)<
\frac{1}{2^n}.
\]
For each $n$, let
\[
E_n = \left\{x \in \Omega: |f_{a(n)}(x)| \geq \frac{1}{n} \right\},
\]
for which $\mu(E_n)<\frac{1}{2^n}$. 
Let
\[
E = \bigcap_{n=1}^\infty \bigcup_{m=n} E_m,
\]
and for each $n$,
\[
\mu(E) \leq \mu \left( \bigcup_{m=n}^\infty E_m \right) 
\leq \sum_{m=n}^\infty \mu(E_m) < \sum_{m=n}^\infty \frac{1}{2^m} =  
\frac{1}{2^n} \cdot 2 = 2^{1-n}.
\]
Because this is true for all $n$, $\mu(E)=0$. If
$x \in \Omega \setminus E$, then there is some $n_x$ such that
$x \not \in \bigcup_{m=n_x}^\infty E_m$. This means that
for $m \geq n_x$ we have $x \not \in E_m$, i.e.
$|f_{a(m)}(x)|<\frac{1}{m}$. This implies that for
$x \not \in E$, 
$f_{a(n)}(x) \to 0$ as $n \to \infty$, showing that
for almost all $x \in \Omega$, $f_{a(n)}(x) \to 0$ as
$n \to \infty$. 
\end{proof}


We now prove that
$\rho$ is a complete metric, namely that $L^0(\mu)$ with this metric is an \textbf{$F$-space}.\footnote{Charalambos D. 
Aliprantis and Kim C. Border, {\em Infinite Dimensional Analysis: A Hitchhiker's Guide}, third ed., p.~481,
Theorem 13.41;
Gerald B. Folland, {\em Real Analysis: Modern Techniques and Their Applications}, second ed., p.~61, Theorem 2.30.} 

\begin{theorem}
$\rho$ is a complete metric on $L^0(\mu)$.
\end{theorem}
\begin{proof}
Suppose that $f_n$ is a Cauchy
sequence in $L^0(\mu)$. 
To prove that $f_n$ is convergent it suffices to prove that
$f_n$ has a convergent subsequence. 
If $(X,d)$ is a metric space and $x_n$ is a Cauchy sequence in $X$, for any $N$ let 
$a_N$ be such that $n,m \geq a_N$ implies that $d(x_n,x_m)<\frac{1}{N}$ and a fortiori
$d(x_n,x_m)<\frac{1}{a_N}$. 
Thus we presume that $f_n$ itself satisfies $\rho(f_n,f_m)<\frac{1}{n}$ for $m \geq n$. 

Let
\[
A_{k,m}(\epsilon) = \{x \in \Omega: |f_k(x)-f_m(x)| \geq \epsilon\}
=\left\{ x\in \Omega:
\frac{|f_k(x)-f_m(x)|}{1+|f_k(x)-f_m(x)|} \geq \frac{\epsilon}{1+\epsilon}\right\},
\]
for which
\[
\frac{\epsilon}{1+\epsilon} \chi_{A_{k,m}(\epsilon)} \leq 
\frac{|f_k(x)-f_m(x)|}{1+|f_k(x)-f_m(x)|}.
\]
If $m \geq k$,
\begin{equation}
\mu(A_{k,m}(\epsilon)) 
\leq \frac{1+\epsilon}{\epsilon} \int_{\Omega}
\frac{|f_k-f_m|}{1+|f_k-f_m|} d\mu
=\frac{1+\epsilon}{\epsilon} \rho(f_k,f_m)
<\frac{1+\epsilon}{\epsilon} \frac{1}{k}.
\label{mgeqk}
\end{equation}
For $n=1$ and $\epsilon_1=\frac{1}{2^1}$, let $k_1$ be such that $\frac{1+\epsilon_1}{\epsilon_1} \frac{1}{k_1} \leq \frac{1}{2^1}$, i.e.
$k_1 \geq 2^1 \cdot \frac{1+\epsilon_1}{\epsilon_1}$. For $n \geq 1$ and $\epsilon_n=\frac{1}{2^n}$, assume that
$k_n$ satisfies $\frac{1+\epsilon_n}{\epsilon_n} \frac{1}{k_n} \leq \frac{1}{2^n}$ and $k_n>k_{n-1}$. 
For $\epsilon_{n+1}=\frac{1}{2^{n+1}}$, let $k_{n+1}$ be such that $\frac{1+\epsilon_{n+1}}{\epsilon_{n+1}} \frac{1}{k_{n+1}} \leq \frac{1}{2^{n+1}}$
and $k_{n+1}>k_n$. For any $n$ we have, because $k_n \geq n$,
$\frac{1+\epsilon_n}{\epsilon_n} \frac{1}{k_n} \leq  \frac{1}{2^{k_n}}$. Then using \eqref{mgeqk} with $m \geq k_n$,
\begin{equation}
\mu\left(A_{k_n,m}\left(\frac{1}{2^n}\right)\right) < \frac{1+\epsilon_n}{\epsilon_n} \frac{1}{k_n} \leq \frac{1}{2^{k_n}}. 
\label{Akn}
\end{equation}
Let $g_n=f_{k_n}$ and let
\[
E_n= \left\{ x \in \Omega: |g_{n+1}(x)-g_n(x)| \geq \frac{1}{2^n} \right\},
\]
for which, by \eqref{Akn}, $\mu(E_n)<\frac{1}{2^n}$. Let
\[
F_n=\bigcup_{r=n}^\infty E_n,
\]
which satisfies
\[
\mu(F_n) \leq \sum_{r=n}^\infty \mu(E_n) < \sum_{r=n}^\infty 2^{-r} = 2^{-n+1}.
\]
Hence $F=\bigcap_{n=1}^\infty F_n$ satisfies $\mu(F)=0$. 

If $x \not \in F$, then there is some $n$ for which $x \not \in F_n$, i.e.
for each $r \geq n$ we have $x \not \in E_r$, i.e.
for each $r \geq n$ we have $|g_{r+1}(x)-g_r(x)| < 2^{-r}$. 
This implies that for $k \geq n$ and for any positive integer $p$,
\begin{align*}
|g_{k+p}(x)-g_k(x)| &\leq |g_{k+p}(x)-g_{k+p-1}(x)|
+ \cdots + |g_{k+1}(x)-g_k(x)|\\
&<2^{-k-p+1}+\cdots+2^{-k}\\
&<2^{-k+1},
\end{align*}
so if $j \geq k$ then
\begin{equation}
|g_j(x)-g_k(x)| < 2^{-k+1}.
\label{jgeqk}
\end{equation}
This shows that if $x \not \in F$ then $g_k(x)$ is a Cauchy sequence in $\mathbb{C}$, and hence converges.
We define $g:\Omega \to \mathbb{C}$
by
\[
g(x)=\chi_{\Omega \setminus F}(x) \limsup_{k \to \infty} g_k(x), \qquad x \in \Omega,
\]
and by Theorem \ref{supmeasurable}, $g \in L^0(\mu)$.
For $x \not \in F_k$ we have $x \not \in F$ and
so $g_l(x) \to g(x)$ as $l \to \infty$. Then for $x \not \in F_k$ and $j \geq k$, using \eqref{jgeqk} we have
\[
|g_j(x)-g(x)| \leq |g_j(x)-g_l(x)| + |g_l(x)-g(x)| < 2^{-k+1} + |g_l(x)-g(x)| \to 2^{-k+1}
\]
as $l \to \infty$,
so $|g_j(x)-g(x)| < 2^{-k+1}$. For $\epsilon>0$, let $k$ be such that $2^{-k+1}\leq \epsilon$. Then
\[
\begin{split}
&\mu(\{x \in \Omega: |g_k(x)-g(x)| \geq \epsilon\})\\
\leq& \mu(F_k)+
\mu(\{x \in \Omega \setminus F_k: |g_k(x)-g(x)| \geq \epsilon\})\\
<&2^{-k+1}
 + \mu(\{x \in \Omega \setminus F_k: |g_k(x)-g(x)| \geq 2^{-k+1}\})\\
=&2^{-k+1},
\end{split}
\]
which tends to $0$ as $k \to \infty$, showing that $g_k$ converges to $g$ in measure, and because $g_k$ is a subsequence of $f_k$ this
completes the proof.
\end{proof}



\section{Equi-integrability}
Let $(\Omega,\Sigma,\mu)$ be a probability  space. A subset $\mathscr{F}$ of $L^1(\mu)$ is said to be
\textbf{equi-integrable} if for every $\epsilon>0$ there is some $\delta>0$ such that for all
$E \in \Sigma$ with $\mu(E) \leq \delta$ and for all $f \in \mathscr{F}$,
\[
\int_E |f| d\mu  \leq \epsilon.
\]
In other words, to say that $\mathscr{F}$ is equi-integrable means that
\[
\lim_{\mu(E) \to 0} \sup_{f \in \mathscr{F}} \int_E |f| d\mu = 0.
\]
The following theorem gives an equivalent condition for a bounded subset of $L^1(\mu)$
to be equi-integrable.\footnote{Fernando Albiac and
Nigel J. Kalton, {\em Topics in Banach Space Theory}, p.~105, Lemma 5.2.6.}



\begin{theorem}
Suppose that $\mathscr{F}$ is a bounded subset of $L^1(\mu)$. Then the following are equivalent:
\begin{enumerate}
\item $\mathscr{F}$ is equi-integrable.
\item $\lim_{C \to \infty} \sup_{f \in \mathscr{F}} \int_{\{|f|>C\}} |f| d\mu =0$.
\end{enumerate}
\label{TFAE}
\end{theorem}
\begin{proof}
Let $K=\sup_{f \in \mathscr{F}} \norm{f}_1<\infty$ and suppose that
$\mathscr{F}$ is equi-integrable. For $f \in \mathscr{F}$,
Chebyshev's inequality tells us
\[
\mu(\{|f|>M\}) \leq \frac{\norm{f}_1}{M} \leq \frac{K}{M}.
\] 
Because $\mu(\{|f|>M\}) \to 0$ as $M \to \infty$ and $\mathscr{F}$ is equi-integrable,
\[
\lim_{M \to \infty} \sup_{f \in \mathscr{F}} \int_{\{|f|>M\}} |f| d\mu  = 0.
\]

Suppose now that
\begin{equation}
\lim_{M \to \infty} \sup_{f \in \mathscr{F}} \int_{\{|f|>M\}} |f| d\mu =0.
\label{Mlimit}
\end{equation}
For $E \in \Sigma$ and $f \in \mathscr{F}$, if $M>0$ then
\begin{align*}
\int_E |f| d\mu&=\int_{E \cap \{|f| \leq M\}} |f| d\mu + \int_{E \cap \{|f|>M\}} |f| d\mu\\
&\leq M \mu(E) + \int_{\{|f|>M\}} |f| d\mu\\
&\leq M \mu(E) + \sup_{g \in \mathscr{F}} \int_{\{|g|>M\}} |g| d\mu,
\end{align*}
hence
\begin{equation}
\sup_{f \in \mathscr{F}} \int_E |f| d\mu \leq M \mu(E) + \sup_{g \in \mathscr{F}} \int_{\{|g|>M\}} |g| d\mu.
\label{supF}
\end{equation}
Let $\epsilon>0$.
By \eqref{Mlimit} there is some $M$ such that 
$\sup_{g \in \mathscr{F}} \int_{\{|g|>M\}} |g| d\mu \leq \frac{\epsilon}{2}$. 
For $\delta=\frac{\epsilon}{2M}$, if $E \in \Sigma$ and $\mu(E) \leq \delta$ then \eqref{supF} yields
\[
\sup_{f \in \mathscr{F}} \int_E |f| d\mu \leq M\delta +  \frac{\epsilon}{2}
= \epsilon,
\]
showing that $\mathscr{F}$ is equi-integrable.
\end{proof}


\begin{theorem}[Absolute continuity of Lebesgue integral]
Suppose that $f \in L^1(\mu)$. If $\epsilon>0$ then there is some $\delta>0$ such that for any
$E \in \Sigma$ with $\mu(E) \leq \delta$,
\[
\int_E |f| d\mu \leq \epsilon.
\]
\label{absolutecontinuity}
\end{theorem}
\begin{proof}
For $n \geq 1$, define
\[
g_n(x) = \min\{|f(x)|,n\}, \qquad x \in \Omega.
\]
Then $g_n$ is a sequence in $L^1(\mu)$ such that for each $x \in \Omega$,
$g_n(x)$ is nondecreasing and $g_n(x) \to |f(x)|$, and thus the monotone convergence theorem
tells us that 
\[
\lim_{n \to \infty} \int_\Omega g_n d\mu = \int_\Omega |f| d\mu.
\]
Then there is some $N$ for which
\[
0 \leq \int_\Omega |f| d\mu - \int_\Omega g_N d\mu \leq \frac{\epsilon}{2}.
\]
For $\delta=\frac{\epsilon}{2N}$ and $E \in \Sigma$ with $\mu(E) \leq \delta$,
\begin{align*}
\int_E |f| d\mu&=\int_E (|f|-g_N) d\mu + \int_E g_N d\mu\\
&\leq \frac{\epsilon}{2}+\int_E g_N d\mu\\
&\leq \frac{\epsilon}{2}+N \mu(E)\\
&\leq \frac{\epsilon}{2}+N\delta\\
&=\epsilon.
\end{align*}
\end{proof}


The following is the \textbf{Vitali convergence theorem}.\footnote{V. I. Bogachev, {\em Measure Theory}, volume I,
p.~268, Theorem 4.5.4.}

\begin{theorem}[Vitali convergence theorem]
Suppose that $f \in L^0(\mu)$ and $f_n$ is a sequence in $L^1(\mu)$. Then the following are equivalent:
\begin{enumerate}
\item $\{f_n\}$ is equi-integrable, $\{f_n\}$ is bounded in $L^1(\mu)$, and $f_n \to f$ in measure. 
\item $f \in L^1(\mu)$ and $f_n \to f$ in $L^1(\mu)$. 
\end{enumerate}
\end{theorem}
\begin{proof}
Suppose that $\{f_n\}$ is equi-integrable and $f_n \to f$ in measure.
Because $f_n \to f$ in measure, there is a subsequence $f_{a(n)}$ of $f_n$ that converges
almost everywhere to $f$ and so $|f_{a(n)}|$ converges almost everywhere to $|f|$.
Let
$K=\sup_{n \geq 1} \norm{f_{a(n)}}_1<\infty$. 
Fatou's lemma tells us that 
$|f| \in L^1(\mu)$ and
\[
\norm{f}_1 \leq \liminf_{n \to \infty} \norm{f_{a(n)}}_1 \leq K.
\]
Because $f \in L^0(\mu)$ and $|f| \in L^1(\mu)$, $f \in L^1(\mu)$. 
To show that $f_n$ converges to $f$ in $L^1(\mu)$, it suffices to show that
any subsequence of $f_n$ itself has a subsequence that converges to $f$ in $L^1(\mu)$. (Generally, a sequence in a topological space
converges to $x$ if and only if any subsequence itself has a subsequence that converges to $x$.)
Thus, let $g_n$ be a subsequence of $f_n$. Because $f_n$ converges to $f$ in measure, the subsequence $g_n$ converges
to $f$ in measure and so there is a subsequence $g_{a(n)}$ of $g_n$ that converges almost everywhere to $f$. 
Let $\epsilon>0$. Because $\{f_n\}$ is equi-integrable, there is some $\delta>0$ such that for all $E \in \Sigma$ with
$\mu(E) \leq \delta$ and for all $n$,
\[
\int_E |g_{a(n)}| d\mu \leq \epsilon.
\]
If $E \in \Sigma$ with $\mu(E) \leq \delta$, then $\chi_E g_{a(n)}$ converges almost
everywhere to $\chi_E f$, and $\sup_{n \geq 1} \norm{\chi_E g_{a(n)}}_1 \leq \epsilon$, so
by Fatou's lemma we obtain 
\[
\int_E |f| d\mu = \norm{\chi_E f}_1 \leq \liminf_{n \to \infty} \norm{\chi_E g_{a(n)}}_1
\leq \epsilon.
\]
But because $g_{a(n)}$ converges almost everywhere to $f$, 
by Egorov's theorem there is some $E \in \Sigma$ with $\mu(E) \leq \delta$ such that
$g_{a(n)} \to f$ uniformly on $\Omega \setminus E$, and so there is some $n_0$ such that
if $n \geq n_0$ and $x \in \Omega \setminus E$ then 
$|g_{a(n)}(x)-f(x)| \leq \epsilon$. Thus for $n \geq n_0$,
\begin{align*}
\int_\Omega |g_{a(n)}-f| d\mu&=
\int_{\Omega \setminus E} |g_{a(n)}-f| d\mu
+\int_E |g_{a(n)}-f| d\mu\\
&\leq \mu(\Omega \setminus E) \epsilon+\int_E |g_{a(n)}| d\mu
+\int_E |f| d\mu\\
&\leq \epsilon+\epsilon+\epsilon,
\end{align*}
which shows that $g_{a(n)} \to f$ in $L^1(\mu)$. That is, we have shown that for any subsequence
$g_n$ of $f_n$ there is a subsequence $g_{a(n)}$ of $g_n$ that converges to $f$ in $L^1(\mu)$, which implies that
the sequence $f_n$ converges to $f$ in $L^1(\mu)$. 

Suppose that $f \in L^1(\mu)$ and $f_n \to f$ in $L^1(\mu)$. First, because the sequence $f_n$ is convergent in $L^1(\mu)$
the set $\{f_n\}$ is bounded in $L^1(\mu)$. Second, $f_n \to f$ in $L^1(\mu)$ implies
that $f_n \to f$ in measure. Third, 
for $\epsilon>0$,
let $n_0$ such that $n \geq n_0$ implies that $\norm{f_n-f}_1 \leq \epsilon$.
For each $1 \leq n < n_0$,
by Theorem \ref{absolutecontinuity} there is some $\delta_{f_n}>0$ such that
for $E \in \Sigma$ and $\mu(E) \leq \delta_{f_n}$, 
\[
\int_E |f_n| d\mu \leq \epsilon,
\]
and likewise there is some $\delta_f$ such that for $E \in \Sigma$ and $\mu(E) \leq f$,
\[
\int_E |f| d\mu \leq \epsilon.
\]
Let $\delta>0$ be the minimum of $\delta_{f_1},\ldots,\delta_{f_{n-1}},\delta_f$. 
Thus if $E \in \Sigma$ and $\mu(E) \leq \delta$, then for $1 \leq n <n$,
\[
\int_E |f_n| d\mu \leq \epsilon,
\]
and for 
for $n \geq n_0$,
\[
\int_E |f_n| d\mu \leq \int_E |f_n-f| d\mu+\int_E |f| d\mu 
\leq \norm{f_n-f}_1 + \int_E |f| d\mu
\leq \epsilon+\epsilon.
\]
This shows that $\{f_n\}$ is equi-integrable, completing the proof.
\end{proof}



The following is the \textbf{de la Vall\'ee-Poussin criterion for equi-integrability}.\footnote{V. I. Bogachev, {\em Measure Theory}, volume I,
p.~272, Theorem 4.5.9.}

\begin{theorem}[de la Vall\'ee-Poussin criterion]
Suppose that $\mathscr{F} \subset L^1(\mu)$. $\mathscr{F}$ is bounded and equi-integrable if and only if  there
is a there nonnegative nondecreasing function $G$ on $[0,\infty)$ such that
\begin{equation}
\lim_{t \to \infty} \frac{G(t)}{t}=\infty \quad \textrm{and}
\quad \sup_{f \in \mathscr{F}} \int_\Omega G(|f(x)|) d\mu(x)<\infty,
\label{Gcond}
\end{equation}
and if there is a nonnegative nondecreasing function $G$ satisfying \eqref{Gcond} then there is a convex
nonnegative nondecreasing function $G$ satisfying \eqref{Gcond}.
\end{theorem}
\begin{proof}
Suppose that $G$ is a nonnegative nondecreasing function on $[0,\infty)$ satisfying \eqref{Gcond}. Let
\[
\sup_{f \in \mathscr{F}} \int_\Omega G(|f(x)|) d\mu(x) \leq M < \infty.
\]
For $\epsilon>0$, there is some $C$ such that $t \geq C$ implies that $\frac{G(t)}{t} \geq \frac{M}{\epsilon}$, and hence, for $f \in \mathscr{F}$,
if $x \in \Omega$ and $|f(x)| \geq C$ then $\frac{G(|f(x)|)}{|f(x)|} \geq \frac{M}{\epsilon}$, i.e.
$|f(x)| \leq \frac{\epsilon}{M} G(|f(x)|)$, which yields
\[
\int_{\{|f| \geq C\}} |f| d\mu \leq \int_{\{|f| \geq C\}} \frac{\epsilon}{M} G(|f(x)|) d\mu(x)
\leq \frac{\epsilon}{M} \cdot M = \epsilon.
\] 
Therefore by Theorem \ref{TFAE}, $\mathscr{F}$ is bounded and equi-integrable. 

Suppose that $\mathscr{F}$ is bounded and equi-integrable. For $f \in \mathscr{F}$ and $j \geq 1$, let
\[
\mu_j(f) = \mu(\{x \in \Omega: |f(x)| > j\}) \in \Sigma.
\]
By induction, because $\mathscr{F}$ is bounded and equi-integrable there is a strictly increasing sequence
of positive integers $C_n$ such that for each $n$, 
\begin{equation}
\sup_{f \in \mathscr{F}} \int_{\{|f| > C_n\}} |f| d\mu \leq 2^{-n}.
\label{Cn}
\end{equation}
For $f \in \mathscr{F}$ and $n \geq 1$,
\begin{align*}
\int_{\{|f| > C_n\}} |f| d\mu&=\sum_{j=C_n}^\infty \int_{\{j < |f| \leq j+1\}} |f| d\mu\\
&\geq \sum_{j=C_n}^\infty j \mu(\{x \in \Omega: j < |f(x)| \leq j+1\})\\
&= \sum_{j=C_n}^\infty j(\mu_j(f)-\mu_{j+1}(f))\\
&=\sum_{j=C_n}^\infty \mu_j(f).
\end{align*}
Using this and \eqref{Cn}, for $f \in \mathscr{F}$,
\begin{align*}
\sum_{n=1}^\infty \sum_{j=C_n}^\infty \mu_j(f)&\leq \sum_{n=1}^\infty \int_{\{|f| > C_n\}} |f| d\mu\\
&\leq \sum_{n=1}^\infty 2^{-n}\\
&=1.
\end{align*}
For $n \geq 0$ we define
\[
\alpha_n = \begin{cases}
0&n<C_1\\
\max\{k : C_k \leq n\}&n \geq C_1.
\end{cases}
\]
It is straightforward that $\alpha_n \to \infty$ as $n \to \infty$.
We define a step function $g$ on $[0,\infty)$ by 
\[
g(t) = \sum_{n=0}^\infty \alpha_n \chi_{(n,n+1]}(t), \qquad 0 \leq t < \infty,
\]
and we define a function $G$ on $[0,\infty)$ by
\[
G(t) = \int_0^t g(s) ds, \qquad 0 \leq t < \infty.
\]
It is apparent that $G$ is nonnegative and nondecreasing. 
For $t_1,t_2 \in [0,\infty)$, $t_1 \leq t_2$, by the fundamental theorem of calculus,
\[
G'(t_1)(t_2-t_1) = g(t_1)(t_2-t_1) \leq G(t_2)-G(t_1),
\]
showing that $G$ is convex. The above inequality also yields that for $t>0$,
$\frac{G(t)}{t} \geq \frac{g(t/2)}{2}$, and  $g(t/2) \to \infty$ as $t \to \infty$ so we get that
$\lim_{t \to \infty} \frac{G(t)}{t} = \infty$. 
For $f \in \mathscr{F}$,
using $G(0)=0$, $G(1)=0$, and for $n \geq 1$, 
\[
G(n+1) \leq g(1)+g(2)+\cdots+g(n+1) = \alpha_0+ \alpha_1+\cdots+\alpha_n
=\alpha_1+\cdots+\alpha_n,
\]
we get
\begin{align*}
\int_\Omega G(|f(x)|) d\mu(x)&=\int_{\{|f|=0\}} G(|f(x)|) d\mu(x)+ \sum_{n=0}^\infty \int_{\{n < |f| \leq n+1\}}
G(|f(x)|) d\mu(x)\\
&\leq  \sum_{n=0}^\infty \int_{\{n<|f| \leq n+1\}} G(n+1) d\mu(x)\\
&= \sum_{n=1}^\infty (\mu_n(f)-\mu_{n+1}(f)) G(n+1)\\
&\leq \sum_{n=1}^\infty (\mu_n(f)-\mu_{n+1}(f)) \sum_{j=1}^n \alpha_j\\
&=\sum_{n=1}^\infty \mu_n(f) \alpha_n\\
&=\sum_{n=1}^\infty \sum_{j=C_n}^\infty \mu_j(f)\\
&\leq 1,
\end{align*}
showing that $\sup_{f \in \mathscr{F}} \int_\Omega G(|f(x)|) d\mu(x)<\infty$, which completes the proof.
\end{proof}


\end{document}